<section class="login-wrap" [class.dark-mode]="isDarkMode">
  <div class="login-grid">
    <div class="card login-card">
      <div class="login-card-head">
        <span class="badge">TrainLog</span>
        <button
          type="button"
          class="theme-toggle"
          [attr.aria-label]="isDarkMode ? 'Activar modo claro' : 'Activar modo oscuro'"
          [attr.title]="isDarkMode ? 'Activar modo claro' : 'Activar modo oscuro'"
          (click)="toggleTheme()"
        >
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"></circle>
            <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
          </svg>
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 12.8A9 9 0 1 1 11.2 3 7 7 0 0 0 21 12.8Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"></path>
          </svg>
          <span class="sr-only">{{ isDarkMode ? 'Modo claro' : 'Modo oscuro' }}</span>
        </button>
      </div>

      <p class="eyebrow">Workout App Access</p>
      <h2>Iniciar sesión</h2>

      <form [formGroup]="form" (ngSubmit)="submit()" class="form-row">
        <div>
          <label for="email">Email</label>
          <input id="email" type="email" formControlName="email" placeholder="tu@email.com" />
          @if (form.controls.email.touched && form.controls.email.hasError('required')) {
            <small class="error">El email es obligatorio</small>
          }
          @if (form.controls.email.touched && form.controls.email.hasError('email')) {
            <small class="error">Formato de email inválido</small>
          }
        </div>

        <div>
          <label for="password">Password</label>
          <input id="password" type="password" formControlName="password" placeholder="******" />
          @if (form.controls.password.touched && form.controls.password.hasError('required')) {
            <small class="error">La contraseña es obligatoria</small>
          }
        </div>

        <button type="submit" [disabled]="loading">
          {{ loading ? 'Entrando...' : 'Empezar entrenamiento' }}
        </button>

        @if (errorMessage) {
          <p class="error">{{ errorMessage }}</p>
        }
      </form>
    </div>
  </div>
</section>
